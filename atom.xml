<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>TeeMo</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-05-10T06:26:30.990Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>TeeMo</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>HCIP综合实验</title>
    <link href="http://yoursite.com/2019/05/10/HCIP%E7%BB%BC%E5%90%88%E5%AE%9E%E9%AA%8C/"/>
    <id>http://yoursite.com/2019/05/10/HCIP综合实验/</id>
    <published>2019-05-10T05:27:17.000Z</published>
    <updated>2019-05-10T06:26:30.990Z</updated>
    
    <content type="html"><![CDATA[<h1 id="HCIP综合实验："><a href="#HCIP综合实验：" class="headerlink" title="HCIP综合实验："></a>HCIP综合实验：</h1><h3 id="实验拓扑："><a href="#实验拓扑：" class="headerlink" title="实验拓扑："></a>实验拓扑：</h3><hr><p><img src="E:\MD保存文件\hcnp.png" alt="hcnp"></p><h3 id="拓扑描述："><a href="#拓扑描述：" class="headerlink" title="拓扑描述："></a>拓扑描述：</h3><hr><ul><li>网络规划如图所示：</li><li>AS 100内运行MPLS VPN,</li><li>各具体实验要求如下所示</li></ul><h3 id="实验要求："><a href="#实验要求：" class="headerlink" title="实验要求："></a>实验要求：</h3><hr><ul><li><p>全网依照拓扑图配置vlan和IP地址</p></li><li><p>总公司：</p><ol><li><p>SW3和SW4的互连接口启用eth-trunk，最大带宽为2G</p></li><li><p>SW1、SW2、SW3、和SW4运行MSTP，SW1为VLAN10的Root，SW2为VLAN20的Root</p></li><li><p>PC1-PC4需要提供网关冗余，为了提高安全性，需要做认证，并使用BFD动态检查上行链路状态，实现自动切换</p></li></ol></li><li><p>AS100需求：</p><ol><li><p>每台设备都需要配置Loopback接口，地址为X.X.X.X（X为设备编号）</p></li><li><p>AS100底层IGP协议为IS-IS，区域为level-2，确保各路由器的loopback接口互通</p></li><li><p>R1与R4建立IBGP邻居（使用loopback接口）</p></li></ol></li><li><p>MPLS-VPN需求：</p><ol><li><p>总公司的PC能访问分公司1/2的PC，分公司之间不能互访</p></li><li><p>R1和SW3、SW4之间运行OSPF协议</p></li><li><p>R4和R5之间运行BGP协议</p></li><li><p>R4和R6之间运行OSPF协议</p></li><li><p>R1和R4建立MP-BGP邻居</p></li></ol></li><li><p>分公司1需求：</p><ol><li>SW5为二层交换机，PC5与PC6配置不同VLAN（属于不同网段），确保两台PC能互访</li></ol></li><li><p>分公司2需求：</p><ol start="2"><li><p>PC8与PC7属于不同VLAN（相同网段），通过VLANIF技术让两台PC正常访问总公司，但是不能互访</p></li><li><p>内部IGP运行OSPF协议，为了加快收敛速度，每网段不允许存在DR</p></li></ol></li></ul><h3 id="要求分析："><a href="#要求分析：" class="headerlink" title="要求分析："></a>要求分析：</h3><hr><ul><li><p>实验拓扑很大，实验要求很多，但是我们将此划分成若各小部分就可以了</p></li><li><p>配置总公司，链路聚合和MSTP被明确提出，并表明了谁为ROOT，网关冗余就是VRRP，不过多加一个认证和BFD</p><ul><li>总公司配置：动态链路聚合/MSTP/VRRP/VRRP认证/VRRP BFD上行链路故障检测，</li></ul></li><li><p>配置分公司一：要求pc属于不同vlan，属于不同网段，但是可以互访，典型的单臂路由。</p><ul><li>分公司一配置：单臂路由</li></ul></li><li><p>配置分公司二：要求pc属于不同vlan，但是都可以通过vlan访问外网，且不能互访，想到是super-vlan，但是super-vlan间是可以互访的，所以关闭arp代理功能，让他们不能互访，且还需在内部运行OSPF协议，并且不能有DR,所以将链路类型改为p2p</p><ul><li>分公司二配置：super vlan/OSPF/修改OSPF链路类型</li></ul></li><li><p>配置MPLS-VPN：总公司可以访问两个分公司，两个分公司不能互访，通过两个vpn实例可以有效解决，然后就是CE与PE之间运行的各种协议。</p><ul><li><p>MPLS-VPN配置：</p><ul><li><p>AS 100内的isis协议</p></li><li><p>MPLS LDP/MPLS VPN/MP-BGP/</p></li><li><p>R1和SW3、SW4之间运行OSPF协议</p></li><li>R4和R5之间运行BGP协议</li><li>R4和R6之间运行OSPF协议</li></ul></li></ul></li></ul><h3 id="实验步骤："><a href="#实验步骤：" class="headerlink" title="实验步骤："></a>实验步骤：</h3><hr><ul><li><p>配置ip地址，ping直连检验连通性，配置loopback口地址，（略）</p></li><li><p>配置总公司：</p><ol><li><p>创建vlan，将vlan加入接口（略），</p></li><li><p>配置SW1-SW2-SW3-SW4的MSTP:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[SW1]stp region-configuration </span><br><span class="line">[SW1-mst-region] region-name cfw   <span class="comment">//配置MSTP域的名称</span></span><br><span class="line">[SW1-mst-region] revision-level <span class="number">1</span>  <span class="comment">//配置MSTP等级</span></span><br><span class="line">[SW1-mst-region] instance <span class="number">1</span> vlan <span class="number">10</span>  <span class="comment">//创建实例1并将vlan10加入该实例</span></span><br><span class="line">[SW1-mst-region] instance <span class="number">2</span> vlan <span class="number">20</span> <span class="comment">//创建实例2并将vlan10加入该实例</span></span><br><span class="line">[SW1-mst-region] active region-configuration <span class="comment">//激活该MSTP域</span></span><br><span class="line"></span><br><span class="line">SW2,SW3跟SW4一样的配置，</span><br><span class="line"></span><br><span class="line">[SW3]stp instance <span class="number">1</span> root primary <span class="comment">//配置SW3为实例1的主根</span></span><br><span class="line">[SW3]stp instance <span class="number">2</span> root secondary  <span class="comment">//配置SW3为实例2的备份根</span></span><br><span class="line"></span><br><span class="line">#SW3,SW4相同的配置，反着来就行。</span><br></pre></td></tr></table></figure></li><li><p>查看MSTP状态：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">[SW3]dis stp instance <span class="number">1</span> </span><br><span class="line">-------[MSTI <span class="number">1</span> Global Info]-------</span><br><span class="line">MSTI Bridge ID      :<span class="number">0.4</span>c1f-cc06<span class="number">-74</span>f7  <span class="comment">//转发桥id</span></span><br><span class="line">MSTI RegRoot/IRPC   :<span class="number">0.4</span>c1f-cc06<span class="number">-74</span>f7 / <span class="number">0</span>  <span class="comment">//桥id</span></span><br><span class="line">MSTI RootPortId     :<span class="number">0.0</span>  <span class="comment">//根路劲开销为0</span></span><br><span class="line">MSTI Root Type      :Primary root</span><br><span class="line">Master Bridge       :<span class="number">32768.4</span>c1f-cc06<span class="number">-74</span>f7</span><br><span class="line">Cost to Master      :<span class="number">0</span></span><br><span class="line">TC received         :<span class="number">5</span></span><br><span class="line">TC count per hello  :<span class="number">0</span></span><br><span class="line">Time since last TC  :<span class="number">0</span> days <span class="number">0</span>h:<span class="number">4</span>m:<span class="number">44</span>s</span><br><span class="line"><span class="built_in">Number</span> <span class="keyword">of</span> TC        :<span class="number">6</span></span><br><span class="line">Last TC occurred    :GigabitEthernet0/<span class="number">0</span>/<span class="number">2</span></span><br><span class="line"> ----[Port2(GigabitEthernet0/<span class="number">0</span>/<span class="number">2</span>)][FORWARDING]----</span><br><span class="line"> Port Role           :Designated Port   <span class="comment">//端口类型为DP</span></span><br><span class="line"> Port Priority       :<span class="number">128</span></span><br><span class="line"> Port Cost(Dot1T )   :Config=auto / Active=<span class="number">20000</span></span><br><span class="line"> Designated Bridge/Port   :<span class="number">0.4</span>c1f-cc06<span class="number">-74</span>f7 / <span class="number">128.2</span></span><br><span class="line"> Port Times          :RemHops <span class="number">20</span></span><br><span class="line"> TC or TCN send      :<span class="number">4</span></span><br><span class="line"> TC or TCN received  :<span class="number">2</span></span><br><span class="line"> ----[Port3(GigabitEthernet0/<span class="number">0</span>/<span class="number">3</span>)][FORWARDING]----</span><br><span class="line"> Port Role           :Designated Port  <span class="comment">//端口类型为DP</span></span><br><span class="line"> Port Priority       :<span class="number">128</span></span><br><span class="line"> Port Cost(Dot1T )   :Config=auto / Active=<span class="number">20000</span></span><br><span class="line"> Designated Bridge/Port   :<span class="number">0.4</span>c1f-cc06<span class="number">-74</span>f7 / <span class="number">128.3</span></span><br><span class="line"> Port Times          :RemHops <span class="number">20</span></span><br><span class="line"> TC or TCN send      :<span class="number">6</span></span><br><span class="line"> TC or TCN received  :<span class="number">3</span></span><br><span class="line">[SW3]</span><br><span class="line"></span><br><span class="line">[SW4]dis stp instance <span class="number">2</span></span><br><span class="line">-------[MSTI <span class="number">2</span> Global Info]-------</span><br><span class="line">MSTI Bridge ID      :<span class="number">0.4</span>c1f-cc8e<span class="number">-4</span>dd9</span><br><span class="line">MSTI RegRoot/IRPC   :<span class="number">0.4</span>c1f-cc8e<span class="number">-4</span>dd9 / <span class="number">0</span></span><br><span class="line">MSTI RootPortId     :<span class="number">0.0</span></span><br><span class="line">MSTI Root Type      :Primary root</span><br><span class="line">Master Bridge       :<span class="number">32768.4</span>c1f-cc06<span class="number">-74</span>f7</span><br><span class="line">Cost to Master      :<span class="number">10000</span></span><br><span class="line">TC received         :<span class="number">13</span></span><br><span class="line">TC count per hello  :<span class="number">0</span></span><br><span class="line">Time since last TC  :<span class="number">0</span> days <span class="number">0</span>h:<span class="number">6</span>m:<span class="number">9</span>s</span><br><span class="line"><span class="built_in">Number</span> <span class="keyword">of</span> TC        :<span class="number">10</span></span><br><span class="line">Last TC occurred    :GigabitEthernet0/<span class="number">0</span>/<span class="number">3</span></span><br><span class="line"> ----[Port3(GigabitEthernet0/<span class="number">0</span>/<span class="number">2</span>)][FORWARDING]----</span><br><span class="line"> Port Role           :Designated Port</span><br><span class="line"> Port Priority       :<span class="number">128</span></span><br><span class="line"> Port Cost(Dot1T )   :Config=auto / Active=<span class="number">20000</span></span><br><span class="line"> Designated Bridge/Port   :<span class="number">0.4</span>c1f-cc8e<span class="number">-4</span>dd9 / <span class="number">128.3</span></span><br><span class="line"> Port Times          :RemHops <span class="number">20</span></span><br><span class="line"> TC or TCN send      :<span class="number">8</span></span><br><span class="line"> TC or TCN received  :<span class="number">10</span></span><br><span class="line"> ----[Port4(GigabitEthernet0/<span class="number">0</span>/<span class="number">3</span>)][FORWARDING]----</span><br><span class="line"> Port Role           :Designated Port</span><br><span class="line"> Port Priority       :<span class="number">128</span></span><br><span class="line"> Port Cost(Dot1T )   :Config=auto / Active=<span class="number">20000</span></span><br><span class="line"> Designated Bridge/Port   :<span class="number">0.4</span>c1f-cc8e<span class="number">-4</span>dd9 / <span class="number">128.4</span></span><br><span class="line"> Port Times          :RemHops <span class="number">20</span></span><br><span class="line"> TC or TCN send      :<span class="number">9</span></span><br><span class="line"> TC or TCN received  :<span class="number">3</span></span><br><span class="line"> ----[Port1(Eth-Trunk1)][FORWARDING]----</span><br><span class="line"> Port Role           :Designated Port</span><br><span class="line"> Port Priority       :<span class="number">128</span></span><br><span class="line"> Port Cost(Dot1T )   :Config=auto / Active=<span class="number">10000</span></span><br><span class="line"> Designated Bridge/Port   :<span class="number">0.4</span>c1f-cc8e<span class="number">-4</span>dd9 / <span class="number">128.1</span></span><br><span class="line"> Port Times          :RemHops <span class="number">20</span></span><br><span class="line"> TC or TCN send      :<span class="number">9</span></span><br><span class="line"> TC or TCN received  :<span class="number">0</span></span><br><span class="line">[SW4]</span><br><span class="line"></span><br><span class="line">#SW3为实例1的root，实例4为实例2的root。</span><br></pre></td></tr></table></figure></li><li><p>配置动态链路聚合：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[SW4]<span class="keyword">in</span> eth <span class="number">1</span></span><br><span class="line">[SW4-Eth-Trunk1]mode lacp-<span class="keyword">static</span>  <span class="comment">//配置静态lacp</span></span><br><span class="line">[SW4-Eth-Trunk1]max active-linknumber <span class="number">2</span>  <span class="comment">//修改最大活跃链路为2</span></span><br><span class="line">[SW4-Eth-Trunk1]port link-type trunk</span><br><span class="line">[SW4-Eth-Trunk1]port trunk allow-pass vlan <span class="number">10</span> <span class="number">20</span></span><br><span class="line"></span><br><span class="line">#题目要求最大带宽为2G,说明要求最大活跃链路为2 ，可以通过静态LACP来完成：</span><br></pre></td></tr></table></figure></li><li><p>查看链路聚合状态：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[SW3]dis eth <span class="number">1</span></span><br><span class="line">Eth-Trunk1<span class="string">'s state information is:</span></span><br><span class="line"><span class="string">Local:</span></span><br><span class="line"><span class="string">LAG ID: 1                   WorkingMode: STATIC                               </span></span><br><span class="line"><span class="string">Preempt Delay: Disabled     Hash arithmetic: According to SIP-XOR-DIP         </span></span><br><span class="line"><span class="string">System Priority: 32768      System ID: 4c1f-cc06-74f7                         </span></span><br><span class="line"><span class="string">Least Active-linknumber: 1  Max Active-linknumber: 2                          </span></span><br><span class="line"><span class="string">Operate status: up          Number Of Up Port In Trunk: 2                     </span></span><br><span class="line"><span class="string">--------------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">ActorPortName          Status   PortType PortPri PortNo PortKey PortState Weight</span></span><br><span class="line"><span class="string">GigabitEthernet0/0/1   Selected 1GE      32768   2      305     10111100  1     </span></span><br><span class="line"><span class="string">GigabitEthernet0/0/4   Selected 1GE      32768   5      305     10111100  1     </span></span><br><span class="line"><span class="string">GigabitEthernet0/0/5   Unselect 1GE      32768   6      305     10100000  1     </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Partner:</span></span><br><span class="line"><span class="string">--------------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">ActorPortName          SysPri   SystemID        PortPri PortNo PortKey PortState</span></span><br><span class="line"><span class="string">GigabitEthernet0/0/1   32768    4c1f-cc8e-4dd9  32768   2      305     10111100</span></span><br><span class="line"><span class="string">GigabitEthernet0/0/4   32768    4c1f-cc8e-4dd9  32768   5      305     10111100</span></span><br><span class="line"><span class="string">GigabitEthernet0/0/5   32768    4c1f-cc8e-4dd9  32768   6      305     10100000</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">[SW3]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#发现g0/0/1和g0/0/4状态为seleted，g0/0/5状态为unselect，说明0/1口和0/4口是活跃了。且带宽加起来正好为2.</span></span><br></pre></td></tr></table></figure></li><li><p>配置VRRP：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[SW3-Vlanif10]vrrp vrid <span class="number">1</span> virtual-ip <span class="number">192.168</span><span class="number">.10</span><span class="number">.254</span> <span class="comment">//配置vrrp组1的虚拟网关为192.168.10.254</span></span><br><span class="line">[SW3-Vlanif10]vrrp vrid <span class="number">1</span> priority <span class="number">150</span> <span class="comment">//配置vrrp组一的优先级为150</span></span><br><span class="line">[SW3-Vlanif10]vrrp vrid <span class="number">1</span> authentication-mode md5 huawei  <span class="comment">//配置vrrp组一的MD5认证</span></span><br><span class="line"></span><br><span class="line">[SW4-Vlanif10]vrrp vrid <span class="number">1</span> virtual-ip <span class="number">192.168</span><span class="number">.10</span><span class="number">.254</span></span><br><span class="line">[SW4-Vlanif10]vrrp vrid <span class="number">1</span> authentication-mode md5 huawei </span><br><span class="line"></span><br><span class="line">#vrrp认证有两种，一种是md5，一种是simple，亲测配置为simple，两边状态都为master。所以我们还是用md5.</span><br><span class="line">#两边配置一模一样，这里仅取VRRP组一的配置</span><br></pre></td></tr></table></figure></li><li><p>查看vrrp组一状态：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">[SW3]dis vrrp <span class="number">1</span></span><br><span class="line">  Vlanif10 | Virtual Router <span class="number">1</span></span><br><span class="line">    State : Master</span><br><span class="line">    Virtual IP : <span class="number">192.168</span><span class="number">.10</span><span class="number">.254</span></span><br><span class="line">    Master IP : <span class="number">192.168</span><span class="number">.10</span><span class="number">.252</span></span><br><span class="line">    PriorityRun : <span class="number">150</span></span><br><span class="line">    PriorityConfig : <span class="number">150</span></span><br><span class="line">    MasterPriority : <span class="number">150</span></span><br><span class="line">    Preempt : YES   Delay Time : <span class="number">0</span> s</span><br><span class="line">    TimerRun : <span class="number">1</span> s</span><br><span class="line">    TimerConfig : <span class="number">1</span> s</span><br><span class="line">    Auth type : MD5   Auth key : Zm~.C3k[ND$+cx#k/mS=p_M#  </span><br><span class="line">    Virtual MAC : <span class="number">0000</span><span class="number">-5e00</span><span class="number">-0101</span></span><br><span class="line">    Check TTL : YES</span><br><span class="line">    Config type : normal-vrrp</span><br><span class="line">    Create time : <span class="number">2019</span><span class="number">-04</span><span class="number">-27</span> <span class="number">13</span>:<span class="number">19</span>:<span class="number">09</span> UTC<span class="number">-08</span>:<span class="number">00</span></span><br><span class="line">    Last change time : <span class="number">2019</span><span class="number">-04</span><span class="number">-27</span> <span class="number">13</span>:<span class="number">19</span>:<span class="number">13</span> UTC<span class="number">-08</span>:<span class="number">00</span></span><br><span class="line"></span><br><span class="line">[SW3]</span><br><span class="line"></span><br><span class="line">[SW4]dis vrrp  <span class="number">1</span></span><br><span class="line">  Vlanif10 | Virtual Router <span class="number">1</span></span><br><span class="line">    State : Backup</span><br><span class="line">    Virtual IP : <span class="number">192.168</span><span class="number">.10</span><span class="number">.254</span></span><br><span class="line">    Master IP : <span class="number">192.168</span><span class="number">.10</span><span class="number">.252</span></span><br><span class="line">    PriorityRun : <span class="number">100</span>  <span class="comment">//本地优先级为100，默认为100</span></span><br><span class="line">    PriorityConfig : <span class="number">100</span></span><br><span class="line">    MasterPriority : <span class="number">150</span>  <span class="comment">//master优先级为150</span></span><br><span class="line">    Preempt : YES   Delay Time : <span class="number">0</span> s</span><br><span class="line">    TimerRun : <span class="number">1</span> s</span><br><span class="line">    TimerConfig : <span class="number">1</span> s</span><br><span class="line">    Auth type : MD5   Auth key : 1!9d=^g7u)^QW:LZJi;=J&gt;a#  //认证类型为MD5</span><br><span class="line">    Virtual MAC : <span class="number">0000</span><span class="number">-5e00</span><span class="number">-0101</span></span><br><span class="line">    Check TTL : YES</span><br><span class="line">    Config type : normal-vrrp</span><br><span class="line">    Create time : <span class="number">2019</span><span class="number">-04</span><span class="number">-27</span> <span class="number">12</span>:<span class="number">52</span>:<span class="number">05</span> UTC<span class="number">-08</span>:<span class="number">00</span></span><br><span class="line">    Last change time : <span class="number">2019</span><span class="number">-04</span><span class="number">-27</span> <span class="number">13</span>:<span class="number">25</span>:<span class="number">31</span> UTC<span class="number">-08</span>:<span class="number">00</span></span><br><span class="line"></span><br><span class="line">[SW4]</span><br><span class="line"></span><br><span class="line">#发现sw3为vrrp组一的master，sw4为vrrp组一的backup。</span><br></pre></td></tr></table></figure></li><li><p>配置vrrp bfd检测上行链路故障：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[SW3]bfd   <span class="comment">//全局打开bfd</span></span><br><span class="line">[SW3]bfd cfw bind peer-ip <span class="number">192.168</span><span class="number">.13</span><span class="number">.1</span> interface Vlanif <span class="number">30</span> source-ip <span class="number">192.168</span><span class="number">.13</span>.</span><br><span class="line"><span class="number">3</span> auto   <span class="comment">//配置bfd名称为cfw，邻居为192.168.13.1 检测vlanif接口，源ip为192.168.13.3 自动创建本地标识符和源端标识符。</span></span><br><span class="line">[SW3-bfd-session-cfw]commit  <span class="comment">//提交配置</span></span><br><span class="line">[SW3-Vlanif10]vrrp vrid <span class="number">1</span> track bfd-session session-name cfw reduced <span class="number">100</span> <span class="comment">//使能VRRP通过联动BFD会话状态检测上行链路状态，执行动作为降低100优先级。</span></span><br><span class="line"></span><br><span class="line">#VRRP备份组与BFD联动，一般配置在master上，实时检测上行链路，当链路发生故障后，原先的master之间降低优先级，变为backup。</span><br></pre></td></tr></table></figure></li><li><p>查看BFD状态：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[SW3]dis bfd session peer-ip <span class="number">192.168</span><span class="number">.13</span><span class="number">.1</span></span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">Local Remote     PeerIpAddr      State     Type        InterfaceName            </span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="number">8193</span>  <span class="number">0</span>          <span class="number">192.168</span><span class="number">.13</span><span class="number">.1</span>    Down      S_AUTO_IF   Vlanif30                 </span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">     Total UP/DOWN Session <span class="built_in">Number</span> : <span class="number">0</span>/<span class="number">1</span></span><br><span class="line">[SW3]</span><br><span class="line"></span><br><span class="line">#发现状态为DOWN,这是因为没有在接口下使能BFD,对端邻居的接口也要使能BFD</span><br></pre></td></tr></table></figure></li><li><p>接口使能BFD:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[SW3-Vlanif30]ospf bfd enable  <span class="comment">//在OSPF的特定接口下使能BFD特性</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]ospf bfd enable</span><br><span class="line"></span><br><span class="line">#BFD通常会跟IGP协议结合使用，动态的检测链路状态</span><br></pre></td></tr></table></figure></li><li><p>查看BFD状态：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[SW3]dis bfd session all </span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">Local Remote     PeerIpAddr      State     Type        InterfaceName            </span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="number">8193</span>  <span class="number">8197</span>       <span class="number">192.168</span><span class="number">.13</span><span class="number">.1</span>    Up        S_AUTO_IF   Vlanif30                 </span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">     Total UP/DOWN Session <span class="built_in">Number</span> : <span class="number">1</span>/<span class="number">0</span></span><br><span class="line">[SW3]</span><br><span class="line"></span><br><span class="line">#状态已经up了，这是我们就可以验证了，关闭g0/0/6口，查看VRRP组一是否会发生变化</span><br></pre></td></tr></table></figure></li><li><p>关闭g0/0/6,查看VRRP组一：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[SW3-GigabitEthernet0/<span class="number">0</span>/<span class="number">6</span>]shutdown </span><br><span class="line"></span><br><span class="line">[SW3]dis vrrp <span class="number">1</span> </span><br><span class="line">  Vlanif10 | Virtual Router <span class="number">1</span></span><br><span class="line">    State : Backup    <span class="comment">//转台为backup</span></span><br><span class="line">    Virtual IP : <span class="number">192.168</span><span class="number">.10</span><span class="number">.254</span></span><br><span class="line">    Master IP : <span class="number">192.168</span><span class="number">.10</span><span class="number">.253</span></span><br><span class="line">    PriorityRun : <span class="number">50</span>  <span class="comment">//本地优先级改为了50</span></span><br><span class="line">    PriorityConfig : <span class="number">150</span>  <span class="comment">//原先优先级为150</span></span><br><span class="line">    MasterPriority : <span class="number">100</span>  <span class="comment">//master的优先级为100</span></span><br><span class="line">    Preempt : YES   Delay Time : <span class="number">0</span> s</span><br><span class="line">    TimerRun : <span class="number">1</span> s</span><br><span class="line">    TimerConfig : <span class="number">1</span> s</span><br><span class="line">    Auth type : MD5   Auth key : Zm~.C3k[ND$+cx#k/mS=p_M#</span><br><span class="line">    Virtual MAC : <span class="number">0000</span><span class="number">-5e00</span><span class="number">-0101</span></span><br><span class="line">    Check TTL : YES</span><br><span class="line">    Config type : normal-vrrp</span><br><span class="line">    Track BFD : cfw  Priority reduced : <span class="number">100</span></span><br><span class="line">    BFD-session state : DOWN   <span class="comment">//bfd状态为down</span></span><br><span class="line">    Create time : <span class="number">2019</span><span class="number">-04</span><span class="number">-27</span> <span class="number">13</span>:<span class="number">19</span>:<span class="number">09</span> UTC<span class="number">-08</span>:<span class="number">00</span></span><br><span class="line">    Last change time : <span class="number">2019</span><span class="number">-04</span><span class="number">-27</span> <span class="number">17</span>:<span class="number">59</span>:<span class="number">29</span> UTC<span class="number">-08</span>:<span class="number">00</span></span><br><span class="line"></span><br><span class="line">[SW3]</span><br><span class="line"></span><br><span class="line">#发现当上行链路故障之后，master自动降低优先级，成为了backup，实现了主备之前的切换，完成实验。</span><br></pre></td></tr></table></figure></li><li><p>抓包分析：</p><p><img src="E:\MD保存文件\1556359756198.png" alt="1556359756198"></p><blockquote><p>BFD报文，基于UDP协议，协议号为3784，单跳检测的为3784，多条检测为4784/3784</p></blockquote><p><img src="E:\MD保存文件\1556360072017.png" alt="1556360072017"></p><blockquote><p>当上行链路故障后，宣告报文会将降低的优先级填写进去，然后发送给邻居，进行状态切换</p></blockquote></li></ol></li><li><p>配置分公司一：</p><ol><li><p>配置SW5二层交换机的vlan，并将vlan加入对应的接口（略)</p></li><li><p>配置单臂路由：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[R5]<span class="keyword">in</span> g <span class="number">0</span>/<span class="number">0</span>/<span class="number">1.10</span></span><br><span class="line">[R5-GigabitEthernet0/<span class="number">0</span>/<span class="number">1.10</span>]dot1q termination vid <span class="number">10</span>  <span class="comment">//配置子接口Dot1q终结的单层VLAN ID</span></span><br><span class="line">[R5-GigabitEthernet0/<span class="number">0</span>/<span class="number">1.10</span>]ip address <span class="number">192.168</span><span class="number">.55</span><span class="number">.254</span> <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span> </span><br><span class="line">[R5-GigabitEthernet0/<span class="number">0</span>/<span class="number">1.10</span>]arp broadcast enable  <span class="comment">//开启arp代理</span></span><br><span class="line"></span><br><span class="line">#题目要求不同网段，不同vlan，但是要求可以互通，那么就想到了单臂路由</span><br></pre></td></tr></table></figure></li></ol></li><li><p>配置分公司二：</p><ol><li><p>创建vlan，配置supper-vlan:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[SW7]vlan <span class="number">30</span> </span><br><span class="line">[SW7-vlan30]aggregate-vlan <span class="comment">//配置vlan30位super-vlan</span></span><br><span class="line">[SW7-vlan30]access-vlan <span class="number">10</span> <span class="number">20</span>  <span class="comment">//配置vlan10 20 为vlan30的sub-vlan</span></span><br><span class="line">[SW7]int vlan <span class="number">30</span> </span><br><span class="line">[SW7-Vlanif30]ip add <span class="number">192.168</span><span class="number">.78</span><span class="number">.254</span> <span class="number">24</span></span><br><span class="line"></span><br><span class="line">#题目要求先相同网段，不同vlan，要求不能互通，想到了super-vlan，但是super-vlan之间是可以互通的，所以想到了关闭arp代理功能，但是因为arp代理默认就是关闭的，所以我们就不用进行配置了。</span><br><span class="line">#基本的配置的话，是要开启vlan间 arp代理的，但是题目要求不能进行互访，所以没有开启ARP代理，</span><br></pre></td></tr></table></figure></li><li><p>配置分公司OSPF:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[R6]ospf <span class="number">200</span> router-id <span class="number">6.6</span><span class="number">.6</span><span class="number">.6</span> </span><br><span class="line">[R6-ospf<span class="number">-200</span>]area <span class="number">0</span></span><br><span class="line">[R6-ospf<span class="number">-200</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">6.6</span><span class="number">.6</span><span class="number">.6</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span> </span><br><span class="line">[R6-ospf<span class="number">-200</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">192.168</span><span class="number">.67</span><span class="number">.6</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span> </span><br><span class="line"></span><br><span class="line">[SW7]ospf <span class="number">200</span> router-id <span class="number">7.7</span><span class="number">.7</span><span class="number">.7</span></span><br><span class="line">[SW7-ospf<span class="number">-200</span>]area <span class="number">0</span></span><br><span class="line">[SW7-ospf<span class="number">-200</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">192.168</span><span class="number">.67</span><span class="number">.7</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span> </span><br><span class="line">[SW7-ospf<span class="number">-200</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">7.7</span><span class="number">.7</span><span class="number">.7</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br></pre></td></tr></table></figure></li><li><p>查看OSPF状态：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[R6]dis ospf peer brief</span><br><span class="line"></span><br><span class="line"> OSPF Process <span class="number">200</span> <span class="keyword">with</span> Router ID <span class="number">6.6</span><span class="number">.6</span><span class="number">.6</span></span><br><span class="line">  Peer Statistic Information</span><br><span class="line"> ----------------------------------------------------------------------------</span><br><span class="line"> Area Id          Interface                        Neighbor id      State    </span><br><span class="line"> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>          GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>             <span class="number">10.1</span><span class="number">.46</span><span class="number">.4</span>        Full        </span><br><span class="line"> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>          GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>             <span class="number">7.7</span><span class="number">.7</span><span class="number">.7</span>          Full        </span><br><span class="line"> ----------------------------------------------------------------------------</span><br><span class="line">[R6]</span><br><span class="line"></span><br><span class="line">#当状态为full，代表邻接关系建立成功了。</span><br></pre></td></tr></table></figure></li><li><p>查看OSPF接口状态：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[SW7]dis ospf interface Vlanif <span class="number">40</span></span><br><span class="line"></span><br><span class="line"> OSPF Process <span class="number">200</span> <span class="keyword">with</span> Router ID <span class="number">7.7</span><span class="number">.7</span><span class="number">.7</span></span><br><span class="line"> Interfaces </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> Interface: <span class="number">192.168</span><span class="number">.67</span><span class="number">.7</span> (Vlanif40)</span><br><span class="line"> Cost: <span class="number">1</span>       State: DR        Type: Broadcast    MTU: <span class="number">1500</span>  </span><br><span class="line"> Priority: <span class="number">1</span></span><br><span class="line"> Designated Router: <span class="number">192.168</span><span class="number">.67</span><span class="number">.7</span></span><br><span class="line"> Backup Designated Router: <span class="number">192.168</span><span class="number">.67</span><span class="number">.6</span></span><br><span class="line"> Timers: Hello <span class="number">10</span> , Dead <span class="number">40</span> , Poll  <span class="number">120</span> , Retransmit <span class="number">5</span> , Transmit Delay <span class="number">1</span> </span><br><span class="line">[SW7]</span><br><span class="line"></span><br><span class="line">#发现此接口为DR,是因为这是MA链路类型，在邻居关系建立之后，就会选举DR,(先比较优先级，默认为1，在比较R-ID,都比大)，但是题目要求不能有DR,所以我们要将接口类型该为p2p.</span><br></pre></td></tr></table></figure></li><li><p>修改OSPF区域内所有接口的网络类型:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[R6-GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>]ospf network-type p2p  <span class="comment">//修改链路类型为p2p</span></span><br><span class="line"></span><br><span class="line">[SW7-Vlanif40]ospf network-type p2p</span><br></pre></td></tr></table></figure></li><li><p>再次查看OSPF接口状态：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[SW7]dis ospf interface Vlanif <span class="number">40</span></span><br><span class="line"></span><br><span class="line"> OSPF Process <span class="number">200</span> <span class="keyword">with</span> Router ID <span class="number">7.7</span><span class="number">.7</span><span class="number">.7</span></span><br><span class="line"> Interfaces </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> Interface: <span class="number">192.168</span><span class="number">.67</span><span class="number">.7</span> (Vlanif40) --&gt; <span class="number">192.168</span><span class="number">.67</span><span class="number">.6</span></span><br><span class="line"> Cost: <span class="number">1</span>       State: P<span class="number">-2</span>-P     Type: P2P       MTU: <span class="number">1500</span>  </span><br><span class="line"> Timers: Hello <span class="number">10</span> , Dead <span class="number">40</span> , Poll  <span class="number">120</span> , Retransmit <span class="number">5</span> , Transmit Delay <span class="number">1</span> </span><br><span class="line">[SW7]</span><br><span class="line"></span><br><span class="line">#状态为P-2-P,已经没有了DR的存在，达成题目要求。</span><br><span class="line">#到这一步，所以的基础配置就已经全部完成，接下来就是MPLS vpn</span><br></pre></td></tr></table></figure></li></ol></li><li><p>配置MPLS-VPN</p><ol><li><p>部署AS区域底层isis协议</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[R1]isis <span class="number">1</span></span><br><span class="line">[R1-isis<span class="number">-1</span>]is-level level<span class="number">-2</span></span><br><span class="line">[R1-isis<span class="number">-1</span>]network-entity <span class="number">49.0001</span><span class="number">.0001</span><span class="number">.0000</span><span class="number">.0000</span><span class="number">.0001</span><span class="number">.00</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">2</span>] isis enable <span class="number">1</span></span><br><span class="line">[R1-GigabitEthernet4/<span class="number">0</span>/<span class="number">0</span>] isis enable <span class="number">1</span></span><br><span class="line">[R1-LoopBack0] isis enable <span class="number">1</span></span><br><span class="line"></span><br><span class="line">#取R1的配置，所有的路由器上都是一样的配置。</span><br></pre></td></tr></table></figure></li><li><p>查看ISIS状态：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[R1]dis isis peer </span><br><span class="line"></span><br><span class="line">                          Peer information <span class="keyword">for</span> ISIS(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">  System Id     Interface          Circuit Id       State HoldTime Type     PRI</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line"><span class="number">0000.0000</span><span class="number">.0002</span>  GE0/<span class="number">0</span>/<span class="number">2</span>            <span class="number">0000.0000</span><span class="number">.0001</span><span class="number">.01</span> Up   <span class="number">22</span>s      L2       <span class="number">64</span> </span><br><span class="line"><span class="number">0000.0000</span><span class="number">.0003</span>  GE4/<span class="number">0</span>/<span class="number">0</span>            <span class="number">0000.0000</span><span class="number">.0001</span><span class="number">.02</span> Up   <span class="number">30</span>s      L2       <span class="number">64</span> </span><br><span class="line"></span><br><span class="line">Total Peer(s): <span class="number">2</span></span><br><span class="line">[R1]</span><br><span class="line"></span><br><span class="line">#状态全部为up。</span><br></pre></td></tr></table></figure><ol start="3"><li>开启MPLS区域的MPLS,及MPLS LDP协议</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[R3]mpls lsr‐id <span class="number">3.3</span><span class="number">.3</span><span class="number">.3</span>  ‐‐配置lsr id</span><br><span class="line">[R3]mpls ‐‐开启MPLS</span><br><span class="line">[R3]mpls ldp ‐‐开启 mpls ldp</span><br><span class="line">[R3]<span class="keyword">in</span> g <span class="number">0</span>/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">[R3‐GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]mpls ‐‐接口模式开启mpls</span><br><span class="line">[R3‐GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]mpls ldp ‐‐接口模式开启mpls ldp</span><br><span class="line">[R3]<span class="keyword">in</span> g <span class="number">0</span>/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">[R3‐GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>]mpls ‐‐接口模式开启mpls</span><br><span class="line">[R3‐GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>]mpls ldp ‐‐接口模式开启mpls ldp</span><br><span class="line"></span><br><span class="line">#取R3配置，所有路由器的配置相同。</span><br></pre></td></tr></table></figure><ol start="4"><li>查看MPLS LDP状态：</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[R3]dis mpls ldp session all </span><br><span class="line"></span><br><span class="line"> LDP Session(s) <span class="keyword">in</span> Public Network</span><br><span class="line"> Codes: LAM(Label Advertisement Mode), SsnAge Unit(DDDD:HH:MM)</span><br><span class="line"> A <span class="string">'*'</span> before a session means the session is being deleted.</span><br><span class="line"> ------------------------------------------------------------------------------</span><br><span class="line"> PeerID             Status      LAM  SsnRole  SsnAge      KASent/Rcv</span><br><span class="line"> ------------------------------------------------------------------------------</span><br><span class="line"> <span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span>:<span class="number">0</span>          Operational DU   Active   <span class="number">0000</span>:<span class="number">02</span>:<span class="number">22</span>  <span class="number">569</span>/<span class="number">569</span></span><br><span class="line"> <span class="number">4.4</span><span class="number">.4</span><span class="number">.4</span>:<span class="number">0</span>          Operational DU   Passive  <span class="number">0000</span>:<span class="number">02</span>:<span class="number">22</span>  <span class="number">570</span>/<span class="number">570</span></span><br><span class="line"> ------------------------------------------------------------------------------</span><br><span class="line"> TOTAL: <span class="number">2</span> session(s) Found.</span><br><span class="line"></span><br><span class="line">[R3]</span><br><span class="line"></span><br><span class="line">#状态为Operational，LDP会话建立成功</span><br></pre></td></tr></table></figure><ol start="5"><li>在PE设备上部署VPN实例，并配置RD与RT属性</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[R1]ip vpn-instance <span class="number">1</span> </span><br><span class="line">[R1-vpn-instance<span class="number">-1</span>]route-distinguisher <span class="number">100</span>:<span class="number">100</span> <span class="comment">//配置RD属性为100:100</span></span><br><span class="line">[R1-vpn-instance<span class="number">-1</span>-af-ipv4]vpn-target <span class="number">100</span>:<span class="number">100</span> <span class="keyword">export</span>-extcommunity  <span class="comment">//配置RT 出属性为100:100</span></span><br><span class="line">[R1-vpn-instance<span class="number">-1</span>-af-ipv4]vpn-target <span class="number">100</span>:<span class="number">100</span> <span class="keyword">import</span>-extcommunity  <span class="comment">////配置RT 进属性为100:100</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]ip binding vpn-instance <span class="number">1</span>  <span class="comment">//在接口下绑定vpn实例1</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]ip address <span class="number">192.168</span><span class="number">.13</span><span class="number">.1</span> <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span> <span class="comment">//重新配置ip</span></span><br><span class="line"></span><br><span class="line">[R1]ip vpn-instance <span class="number">2</span></span><br><span class="line">[R1-vpn-instance<span class="number">-2</span>]route-distinguisher <span class="number">200</span>:<span class="number">200</span></span><br><span class="line">[R1-vpn-instance<span class="number">-2</span>-af-ipv4]vpn-target <span class="number">200</span>:<span class="number">200</span> <span class="keyword">export</span>-extcommunity</span><br><span class="line">[R1-vpn-instance<span class="number">-2</span>-af-ipv4]vpn-target <span class="number">200</span>:<span class="number">200</span> <span class="keyword">import</span>-extcommunity</span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>]ip binding vpn-instance <span class="number">2</span>  </span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>]ip address <span class="number">192.168</span><span class="number">.14</span><span class="number">.1</span> <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[R4]ip vpn-instance <span class="number">1</span> </span><br><span class="line">[R4-vpn-instance<span class="number">-1</span>]route-distinguisher <span class="number">100</span>:<span class="number">100</span> <span class="comment">//配置RD属性为100:100</span></span><br><span class="line">[R4-vpn-instance<span class="number">-1</span>-af-ipv4]vpn-target <span class="number">100</span>:<span class="number">100</span> <span class="keyword">export</span>-extcommunity  <span class="comment">//配置RT 出属性为100:100</span></span><br><span class="line">[R4-vpn-instance<span class="number">-1</span>-af-ipv4]vpn-target <span class="number">100</span>:<span class="number">100</span> <span class="keyword">import</span>-extcommunity  <span class="comment">////配置RT 进属性为100:100</span></span><br><span class="line">[R4-GigabitEthernet4/<span class="number">0</span>/<span class="number">0</span>]ip binding vpn-instance <span class="number">1</span></span><br><span class="line">[R4-GigabitEthernet4/<span class="number">0</span>/<span class="number">0</span>]ip address <span class="number">10.1</span><span class="number">.46</span><span class="number">.4</span> <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span> </span><br><span class="line"></span><br><span class="line">[R4]ip vpn-instance <span class="number">2</span></span><br><span class="line">[R4-vpn-instance<span class="number">-2</span>]route-distinguisher <span class="number">200</span>:<span class="number">200</span></span><br><span class="line">[R4-vpn-instance<span class="number">-2</span>-af-ipv4]vpn-target <span class="number">200</span>:<span class="number">200</span> <span class="keyword">export</span>-extcommunity</span><br><span class="line">[R4-vpn-instance<span class="number">-2</span>-af-ipv4]vpn-target <span class="number">200</span>:<span class="number">200</span> <span class="keyword">import</span>-extcommunity</span><br><span class="line">[R4-GigabitEthernet0/<span class="number">0</span>/<span class="number">2</span>]ip binding vpn-instance <span class="number">2</span></span><br><span class="line">[R4-GigabitEthernet0/<span class="number">0</span>/<span class="number">2</span>]ip address <span class="number">10.1</span><span class="number">.45</span><span class="number">.4</span> <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span> </span><br><span class="line"></span><br><span class="line">#RD,RT值的意义我们就不在过多的赘述了，</span><br><span class="line">#我们主要的还是要了解为啥要这样设置vpn实例，先看一下题目要求，要求总公司可以和分公司互访，但是分公司之间不能互访。</span><br><span class="line">#所以我们还是要配置两个vpn实例的，总公司那边配置两个实例，和分公司那边的实例做一一对应的关系，每隔分公司配置一个实例，只与总公司对应，便完成了我们的实验目的。</span><br></pre></td></tr></table></figure></li><li><p>在PE设备间部署MP-BGP协议</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[R1]bgp <span class="number">100</span></span><br><span class="line">[R1-bgp]peer <span class="number">4.4</span><span class="number">.4</span><span class="number">.4</span> <span class="keyword">as</span>-number <span class="number">100</span> </span><br><span class="line">[R1-bgp]peer <span class="number">4.4</span><span class="number">.4</span><span class="number">.4</span> connect-interface LoopBack0</span><br><span class="line">[R1-bgp]ipv4-family vpnv4  <span class="comment">//进入BGP-VPNv4地址族视图。 </span></span><br><span class="line">[R1-bgp-af-vpnv4]peer <span class="number">4.4</span><span class="number">.4</span><span class="number">.4</span> enable  <span class="comment">//使能与4.4.4.4之间交换路由信息。</span></span><br><span class="line"></span><br><span class="line">[R4]bgp <span class="number">100</span></span><br><span class="line">[R4-bgp]peer <span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span> <span class="keyword">as</span>-number <span class="number">100</span> </span><br><span class="line">[R4-bgp]peer <span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span> connect-interface LoopBack0</span><br><span class="line">[R4-bgp]ipv4-family vpnv4  <span class="comment">//进入BGP-VPNv4地址族视图。 </span></span><br><span class="line">[R4-bgp-af-vpnv4]peer <span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span> enable <span class="comment">//使能与1.1.1.1之间交换路由信息。</span></span><br></pre></td></tr></table></figure></li><li><p>查看MP-BGP状态：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[R4]dis bgp vpnv4 all peer </span><br><span class="line"></span><br><span class="line"> BGP local router ID : <span class="number">10.1</span><span class="number">.24</span><span class="number">.4</span></span><br><span class="line"> Local AS number : <span class="number">100</span></span><br><span class="line"> Total number <span class="keyword">of</span> peers : <span class="number">2</span>  Peers <span class="keyword">in</span> established state : <span class="number">2</span></span><br><span class="line"></span><br><span class="line">  Peer            V          AS  MsgRcvd  MsgSent  OutQ  Up/Down       State Pre</span><br><span class="line">fRcv</span><br><span class="line"></span><br><span class="line">  <span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span>         <span class="number">4</span>         <span class="number">100</span>      <span class="number">186</span>      <span class="number">158</span>     <span class="number">0</span> <span class="number">02</span>:<span class="number">31</span>:<span class="number">17</span> Established    </span><br><span class="line">   <span class="number">0</span></span><br><span class="line"></span><br><span class="line">[R4]</span><br><span class="line"></span><br><span class="line">#BGP邻居建立完成。</span><br></pre></td></tr></table></figure></li><li><p>部署PE-R4与CE-R6之间的OSPF路由协议:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[R4]ospf <span class="number">200</span> vpn-instance <span class="number">1</span>  <span class="comment">//配置基于VPN实例1的OSPF</span></span><br><span class="line">[R4-ospf<span class="number">-200</span>]a <span class="number">0</span></span><br><span class="line">[R4-ospf<span class="number">-200</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">10.1</span><span class="number">.46</span><span class="number">.4</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span> </span><br><span class="line">[R4-ospf<span class="number">-200</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">4.4</span><span class="number">.4</span><span class="number">.4</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line">[R6]ospf <span class="number">200</span></span><br><span class="line">[R6-ospf<span class="number">-200</span>]a <span class="number">0</span></span><br><span class="line">[R6-ospf<span class="number">-200</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">10.1</span><span class="number">.46</span><span class="number">.6</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span> </span><br><span class="line"></span><br><span class="line">#在这里要注意，两边的链路类型要是一致，刚在在R6上修改链路类型为p2p后，如果对端为以太网链路，那么依旧是可以建立起邻接关系的，因为他们的hello，dead时间都是一致的，所以可以建立起邻接关系，但是是不传递路由的，这里一定要注意</span><br></pre></td></tr></table></figure></li><li><p>查看OSPF状态：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[R4]dis ospf pe b</span><br><span class="line"></span><br><span class="line"> OSPF Process <span class="number">200</span> <span class="keyword">with</span> Router ID <span class="number">10.1</span><span class="number">.46</span><span class="number">.4</span></span><br><span class="line">  Peer Statistic Information</span><br><span class="line"> ----------------------------------------------------------------------------</span><br><span class="line"> Area Id          Interface                        Neighbor id      State    </span><br><span class="line"> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>          GigabitEthernet4/<span class="number">0</span>/<span class="number">0</span>             <span class="number">6.6</span><span class="number">.6</span><span class="number">.6</span>          Full        </span><br><span class="line"> ----------------------------------------------------------------------------</span><br><span class="line">[R4]</span><br><span class="line"></span><br><span class="line">#OSPF邻接关系建立成功</span><br></pre></td></tr></table></figure></li><li><p>部署PE-R4与CE-R5之间的BGP路由协议:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[R4]bgp <span class="number">100</span></span><br><span class="line">[R4-bgp]ipv4-family vpn-instance <span class="number">2</span>  <span class="comment">//进入BGP-VPN实例视图</span></span><br><span class="line">[R4-bgp<span class="number">-2</span>]<span class="keyword">as</span>-number <span class="number">300</span>  <span class="comment">//创建新的AS号</span></span><br><span class="line">[R4-bgp<span class="number">-2</span>]peer <span class="number">10.1</span><span class="number">.45</span><span class="number">.5</span> <span class="keyword">as</span>-number <span class="number">200</span> <span class="comment">//手动指EBGP邻居</span></span><br><span class="line"></span><br><span class="line">[R5]bgp <span class="number">200</span></span><br><span class="line">[R5-bgp]peer <span class="number">10.1</span><span class="number">.45</span><span class="number">.4</span> <span class="keyword">as</span>-number <span class="number">300</span></span><br></pre></td></tr></table></figure></li><li><p>查看BGP状态：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[R4]dis bgp vpnv4 all peer </span><br><span class="line"></span><br><span class="line"> BGP local router ID : <span class="number">10.1</span><span class="number">.24</span><span class="number">.4</span></span><br><span class="line"> Local AS number : <span class="number">100</span></span><br><span class="line"> Total number <span class="keyword">of</span> peers : <span class="number">2</span>  Peers <span class="keyword">in</span> established state : <span class="number">2</span></span><br><span class="line"></span><br><span class="line">  Peer            V          AS  MsgRcvd  MsgSent  OutQ  Up/Down       State Pre</span><br><span class="line">fRcv</span><br><span class="line"></span><br><span class="line">  <span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span>         <span class="number">4</span>         <span class="number">100</span>      <span class="number">233</span>      <span class="number">205</span>     <span class="number">0</span> <span class="number">03</span>:<span class="number">18</span>:<span class="number">19</span> Established    </span><br><span class="line">   <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  Peer <span class="keyword">of</span> IPv4-family <span class="keyword">for</span> vpn instance :</span><br><span class="line"></span><br><span class="line"> VPN-Instance <span class="number">2</span>, Router ID <span class="number">10.1</span><span class="number">.24</span><span class="number">.4</span>:</span><br><span class="line">  <span class="number">10.1</span><span class="number">.45</span><span class="number">.5</span>       <span class="number">4</span>         <span class="number">200</span>      <span class="number">202</span>      <span class="number">222</span>     <span class="number">0</span> <span class="number">03</span>:<span class="number">18</span>:<span class="number">42</span> Established    </span><br><span class="line">   <span class="number">2</span></span><br><span class="line">[R4]</span><br><span class="line"></span><br><span class="line">#发现有两个邻居，一个是IBGP邻居，意识EBGP邻居</span><br></pre></td></tr></table></figure></li><li><p>部署PE-R1与CE-SW3/SW4之间的OSPF路由协议:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[R1]ospf <span class="number">1</span> vpn-instance <span class="number">1</span>  <span class="comment">//创建基于实例1的OSPF</span></span><br><span class="line">[R1-ospf<span class="number">-1</span>]area <span class="number">0</span></span><br><span class="line">[R1-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span> </span><br><span class="line">[R1-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">192.168</span><span class="number">.13</span><span class="number">.1</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span> </span><br><span class="line"></span><br><span class="line">[R1]ospf <span class="number">2</span> vpn-instance <span class="number">2</span></span><br><span class="line">[R1-ospf<span class="number">-2</span>]a <span class="number">0</span></span><br><span class="line">[R1-ospf<span class="number">-2</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">192.168</span><span class="number">.14</span><span class="number">.1</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[SW3]ospf <span class="number">1</span> </span><br><span class="line">[SW3-ospf<span class="number">-1</span>]a <span class="number">0</span></span><br><span class="line">[SW3-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">192.168</span><span class="number">.13</span><span class="number">.3</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[SW4]ospf <span class="number">1</span> </span><br><span class="line">[SW4-ospf<span class="number">-1</span>]a <span class="number">0</span></span><br><span class="line">[SW4-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">192.168</span><span class="number">.14</span><span class="number">.4</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line">[SW4-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">192.168</span><span class="number">.10</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.255</span></span><br><span class="line">[SW4-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">192.168</span><span class="number">.20</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.255</span></span><br><span class="line"></span><br><span class="line">#因为有两个vpn实例，所以我们要创建分别基于两个实例的OSPF来让他们分别学习路由。</span><br></pre></td></tr></table></figure></li><li><p>查看OSPF状态：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[R1]dis ospf peer brief </span><br><span class="line"></span><br><span class="line"> OSPF Process <span class="number">1</span> <span class="keyword">with</span> Router ID <span class="number">192.168</span><span class="number">.13</span><span class="number">.1</span></span><br><span class="line">  Peer Statistic Information</span><br><span class="line"> ----------------------------------------------------------------------------</span><br><span class="line"> Area Id          Interface                        Neighbor id      State    </span><br><span class="line"> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>          GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>             <span class="number">192.168</span><span class="number">.10</span><span class="number">.252</span>   Full        </span><br><span class="line"> ----------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"> OSPF Process <span class="number">2</span> <span class="keyword">with</span> Router ID <span class="number">192.168</span><span class="number">.14</span><span class="number">.1</span></span><br><span class="line">  Peer Statistic Information</span><br><span class="line"> ----------------------------------------------------------------------------</span><br><span class="line"> Area Id          Interface                        Neighbor id      State    </span><br><span class="line"> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>          GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>             <span class="number">192.168</span><span class="number">.10</span><span class="number">.253</span>   Full        </span><br><span class="line"> ----------------------------------------------------------------------------</span><br><span class="line">[R1]</span><br><span class="line"></span><br><span class="line">#两个OSFP的邻接状态都建立成功了</span><br></pre></td></tr></table></figure></li><li><p>查看R1上的ospf vpnv4的路由表：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[R1]dis ip routing-table vpn-instance <span class="number">1</span> protocol ospf </span><br><span class="line">Route Flags: R - relay, D - download to fib</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line"><span class="number">1</span> routing table : OSPF</span><br><span class="line">         Destinations : <span class="number">5</span>        Routes : <span class="number">5</span>        </span><br><span class="line"></span><br><span class="line">OSPF routing table status : &lt;Active&gt;</span><br><span class="line">         Destinations : 5        Routes : 5</span><br><span class="line"></span><br><span class="line">Destination/Mask    Proto   Pre  Cost      Flags NextHop         Interface</span><br><span class="line"></span><br><span class="line">   192.168.10.0/24  OSPF    10   2           D   192.168.13.3    GigabitEthernet</span><br><span class="line">0/0/0</span><br><span class="line"> 192.168.10.254/32  OSPF    10   2           D   192.168.13.3    GigabitEthernet</span><br><span class="line">0/0/0</span><br><span class="line">   192.168.14.0/24  OSPF    10   3           D   192.168.13.3    GigabitEthernet</span><br><span class="line">0/0/0</span><br><span class="line">   192.168.20.0/24  OSPF    10   2           D   192.168.13.3    GigabitEthernet</span><br><span class="line">0/0/0</span><br><span class="line"> 192.168.20.254/32  OSPF    10   3           D   192.168.13.3    GigabitEthernet</span><br><span class="line">0/0/0</span><br><span class="line"></span><br><span class="line">OSPF routing table status : &lt;Inactive&gt;</span><br><span class="line">         Destinations : 0        Routes : 0</span><br><span class="line"></span><br><span class="line">[R1]</span><br><span class="line"></span><br><span class="line">#发现已经有了总公司主机的路由，但是BGP里面不存在，所以我么要将其引入进BGP，让他传递给分公司，</span><br></pre></td></tr></table></figure><ol start="15"><li>在PE-R1上做单点双向路由引入：</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在BGP 里面引入OSPF:</span></span><br><span class="line">[R1-bgp]ipv4-family vpn-instance <span class="number">1</span></span><br><span class="line">[R1-bgp<span class="number">-1</span>]<span class="keyword">import</span>-route ospf <span class="number">1</span> </span><br><span class="line"></span><br><span class="line">[R1-bgp]ipv4-family vpn-instance <span class="number">2</span></span><br><span class="line">[R1-bgp<span class="number">-2</span>]<span class="keyword">import</span>-route ospf <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在ospf里面引入BGP:</span></span><br><span class="line">[R1]ospf <span class="number">1</span> </span><br><span class="line">[R1-ospf<span class="number">-1</span>]<span class="keyword">import</span>-route bgp</span><br><span class="line">[R1]ospf <span class="number">2</span> </span><br><span class="line">[R1-ospf<span class="number">-2</span>]<span class="keyword">import</span>-route bgp</span><br><span class="line"></span><br><span class="line"><span class="comment">//在BGP 里面引入OSPF:</span></span><br><span class="line">[R4-bgp]ipv4-family vpn-instance <span class="number">1</span></span><br><span class="line">[R4-bgp<span class="number">-1</span>]<span class="keyword">import</span>-route ospf <span class="number">200</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在ospf里面引入BGP:</span></span><br><span class="line">[R4]ospf <span class="number">200</span></span><br><span class="line">[R4-ospf<span class="number">-200</span>]<span class="keyword">import</span>-route bgp</span><br></pre></td></tr></table></figure><ol start="16"><li>查看PE的vpnv4 实例1的路由表：</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[R1]dis ip rou vpn <span class="number">1</span> <span class="number">192.168</span><span class="number">.78</span><span class="number">.0</span> verbose</span><br><span class="line">Route Flags: R - relay, D - download to fib</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Routing Table : <span class="number">1</span></span><br><span class="line">Summary Count : <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Destination: <span class="number">192.168</span><span class="number">.78</span><span class="number">.0</span>/<span class="number">24</span></span><br><span class="line">     Protocol: IBGP             Process ID: <span class="number">0</span></span><br><span class="line">   Preference: <span class="number">255</span>                    Cost: <span class="number">4</span></span><br><span class="line">      NextHop: <span class="number">4.4</span><span class="number">.4</span><span class="number">.4</span>           Neighbour: <span class="number">4.4</span><span class="number">.4</span><span class="number">.4</span></span><br><span class="line">        State: Active Adv Relied       Age: <span class="number">00</span>h00m58s</span><br><span class="line">          Tag: <span class="number">0</span>                  Priority: low</span><br><span class="line">        Label: <span class="number">1040</span>                QoSInfo: <span class="number">0x0</span></span><br><span class="line">   IndirectID: <span class="number">0x4</span>              </span><br><span class="line"> RelayNextHop: <span class="number">10.1</span><span class="number">.12</span><span class="number">.2</span>         Interface: GigabitEthernet0/<span class="number">0</span>/<span class="number">2</span></span><br><span class="line">     TunnelID: <span class="number">0x3</span>                   Flags: RD</span><br><span class="line">[R1]</span><br><span class="line"></span><br><span class="line">#发现已经有了分公司二的主机路由了，私网标签为1040，这是由BGP分发的，</span><br><span class="line">#私网标签的作用是用于判断数据包通过哪个VPN实例进行转发。</span><br></pre></td></tr></table></figure><ol start="17"><li>查看MPLS LSP ：</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[R4]dis mpls lsp include <span class="number">3.3</span><span class="number">.3</span><span class="number">.3</span> <span class="number">32</span></span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">                 LSP Information: LDP LSP</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">FEC                In/Out Label  In/Out IF                      Vrf Name       </span><br><span class="line"><span class="number">3.3</span><span class="number">.3</span><span class="number">.3</span>/<span class="number">32</span>         NULL/<span class="number">3</span>        -<span class="regexp">/GE0/</span><span class="number">0</span>/<span class="number">1</span>                                     </span><br><span class="line"><span class="number">3.3</span><span class="number">.3</span><span class="number">.3</span>/<span class="number">32</span>         <span class="number">1024</span>/<span class="number">3</span>        -<span class="regexp">/GE0/</span><span class="number">0</span>/<span class="number">1</span>                                     </span><br><span class="line">[R4]</span><br><span class="line"></span><br><span class="line">#发现由MPLS LDP分配的公网标签为1024，</span><br><span class="line">#公网标签的作用是由于骨干网中没有vpnv4的路由表，指导不了vpnv4的路由转发，所以由公网标签进行指导转发，指导该数据包去往对端PE.</span><br></pre></td></tr></table></figure></li><li><p>抓包查看标签：</p><p><img src="E:\MD保存文件\1556355743099.png" alt="1556355743099"></p><blockquote><p>发现公网标签为1024，私网标签为1040，跟上述一致</p></blockquote><ol start="19"><li>查看PE的vpnv4 实例2的路由表：</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[R1]dis ip routing-table vpn-instance <span class="number">2</span> <span class="number">192.168</span><span class="number">.56</span><span class="number">.0</span> verbose </span><br><span class="line">Route Flags: R - relay, D - download to fib</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Routing Table : <span class="number">2</span></span><br><span class="line">Summary Count : <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Destination: <span class="number">192.168</span><span class="number">.56</span><span class="number">.0</span>/<span class="number">24</span></span><br><span class="line">     Protocol: IBGP             Process ID: <span class="number">0</span></span><br><span class="line">   Preference: <span class="number">255</span>                    Cost: <span class="number">0</span></span><br><span class="line">      NextHop: <span class="number">4.4</span><span class="number">.4</span><span class="number">.4</span>           Neighbour: <span class="number">4.4</span><span class="number">.4</span><span class="number">.4</span></span><br><span class="line">        State: Active Adv Relied       Age: <span class="number">03</span>h55m09s</span><br><span class="line">          Tag: <span class="number">0</span>                  Priority: low</span><br><span class="line">        Label: <span class="number">1027</span>                QoSInfo: <span class="number">0x0</span></span><br><span class="line">   IndirectID: <span class="number">0x3</span>              </span><br><span class="line"> RelayNextHop: <span class="number">10.1</span><span class="number">.12</span><span class="number">.2</span>         Interface: GigabitEthernet0/<span class="number">0</span>/<span class="number">2</span></span><br><span class="line">     TunnelID: <span class="number">0x3</span>                   Flags: RD</span><br><span class="line">[R1]</span><br><span class="line"></span><br><span class="line">#私网标签为1027</span><br><span class="line">#公网标签是一样的。因为数据都要达到R4</span><br></pre></td></tr></table></figure></li><li><p>抓包查看：</p><p><img src="E:\MD保存文件\1556356419553.png" alt="1556356419553"></p><blockquote><p>公网你标签为1024，私网标签为1027.</p></blockquote></li></ol></li></ul><h3 id="实验结果："><a href="#实验结果：" class="headerlink" title="实验结果："></a>实验结果：</h3><ul><li><p>在总公司PC1上访问分公司PC 7:</p><ul><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">PC&gt;ping 192.168.78.7</span><br><span class="line"></span><br><span class="line">Ping 192.168.78.7: 32 data bytes, Press Ctrl_C to break</span><br><span class="line">From 192.168.78.7: bytes=32 seq=1 ttl=122 time=141 ms</span><br><span class="line">From 192.168.78.7: bytes=32 seq=2 ttl=122 time=140 ms</span><br><span class="line">From 192.168.78.7: bytes=32 seq=3 ttl=122 time=94 ms</span><br><span class="line">From 192.168.78.7: bytes=32 seq=4 ttl=122 time=141 ms</span><br><span class="line">From 192.168.78.7: bytes=32 seq=5 ttl=122 time=94 ms</span><br><span class="line"></span><br><span class="line">--- 192.168.78.7 ping statistics ---</span><br><span class="line">  5 packet(s) transmitted</span><br><span class="line">  5 packet(s) received</span><br><span class="line">  0.00% packet loss</span><br><span class="line">  round-trip min/avg/max = 94/122/141 ms</span><br><span class="line"></span><br><span class="line">PC&gt;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>在总公司PC 2上访问分公司PC 6:</p><ul><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">PC&gt;ping 192.168.56.6</span><br><span class="line"></span><br><span class="line">Ping 192.168.56.6: 32 data bytes, Press Ctrl_C to break</span><br><span class="line">Request timeout!</span><br><span class="line">From 192.168.56.6: bytes=32 seq=2 ttl=123 time=141 ms</span><br><span class="line">From 192.168.56.6: bytes=32 seq=3 ttl=123 time=125 ms</span><br><span class="line">From 192.168.56.6: bytes=32 seq=4 ttl=123 time=172 ms</span><br><span class="line">From 192.168.56.6: bytes=32 seq=5 ttl=123 time=172 ms</span><br><span class="line"></span><br><span class="line">--- 192.168.56.6 ping statistics ---</span><br><span class="line">  5 packet(s) transmitted</span><br><span class="line">  4 packet(s) received</span><br><span class="line">  20.00% packet loss</span><br><span class="line">  round-trip min/avg/max = 0/152/172 ms</span><br><span class="line"></span><br><span class="line">PC&gt;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>在分公司二PC 7上访问分公司一PC 6：</p><ul><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">PC&gt;ping 192.168.78.7</span><br><span class="line"></span><br><span class="line">Ping 192.168.78.7: 32 data bytes, Press Ctrl_C to break</span><br><span class="line">Request timeout!</span><br><span class="line">Request timeout!</span><br><span class="line">Request timeout!</span><br><span class="line">Request timeout!</span><br><span class="line">Request timeout!</span><br><span class="line"></span><br><span class="line">--- 192.168.78.7 ping statistics ---</span><br><span class="line">  5 packet(s) transmitted</span><br><span class="line">  0 packet(s) received</span><br><span class="line">  100.00% packet loss</span><br><span class="line"></span><br><span class="line">PC&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="实验总结："><a href="#实验总结：" class="headerlink" title="实验总结："></a>实验总结：</h3><hr><blockquote><p>本次实验的话，考察了很多的知识点，最难的是MPLS-VPN,其他的地方没有特别难的，但是要注意细节，整个实验考察了IP 大部分知识点，但是最难的路由过滤和渗透没有考察，总体来说，配置特别繁琐，要注意细节，根据自己的经验，一步一步的来，基本就没什么问题了。</p></blockquote><p>​     </p><p>​     </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;HCIP综合实验：&quot;&gt;&lt;a href=&quot;#HCIP综合实验：&quot; class=&quot;headerlink&quot; title=&quot;HCIP综合实验：&quot;&gt;&lt;/a&gt;HCIP综合实验：&lt;/h1&gt;&lt;h3 id=&quot;实验拓扑：&quot;&gt;&lt;a href=&quot;#实验拓扑：&quot; class=&quot;header
      
    
    </summary>
    
      <category term="HCIP-R&amp;S 实验" scheme="http://yoursite.com/categories/HCIP-R-S-%E5%AE%9E%E9%AA%8C/"/>
    
    
      <category term="HCIP" scheme="http://yoursite.com/tags/HCIP/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2019/05/09/hello-world/"/>
    <id>http://yoursite.com/2019/05/09/hello-world/</id>
    <published>2019-05-09T08:37:03.758Z</published>
    <updated>2017-10-28T00:39:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>HCIA</title>
    <link href="http://yoursite.com/2017/05/26/HCIA/"/>
    <id>http://yoursite.com/2017/05/26/HCIA/</id>
    <published>2017-05-26T04:12:57.000Z</published>
    <updated>2019-05-10T05:46:00.583Z</updated>
    
    <content type="html"><![CDATA[<h2 id="sdfsd-fas"><a href="#sdfsd-fas" class="headerlink" title="sdfsd fas"></a>sdfsd fas</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;sdfsd-fas&quot;&gt;&lt;a href=&quot;#sdfsd-fas&quot; class=&quot;headerlink&quot; title=&quot;sdfsd fas&quot;&gt;&lt;/a&gt;sdfsd fas&lt;/h2&gt;
      
    
    </summary>
    
      <category term="HCIA" scheme="http://yoursite.com/categories/HCIA/"/>
    
    
      <category term="HCIA" scheme="http://yoursite.com/tags/HCIA/"/>
    
  </entry>
  
</feed>
